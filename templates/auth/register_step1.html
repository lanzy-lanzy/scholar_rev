{% extends 'base/base.html' %}

{% block title %}Register - Step 1{% endblock %}

{% block extra_css %}
<style>
  /* Import the same visual tokens used in login for a consistent look */
  :root {
    --primary-dark: var(--brand-1);
    --primary-medium: var(--brand-2);
    --accent-warm: var(--brand-4);
    --neutral-light: var(--brand-3);
  }
  .gradient-bg { background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary-medium) 100%); }
  .glass-card { background: rgba(255,255,255,0.95); backdrop-filter: blur(20px); border: 1px solid rgba(255,255,255,0.2); box-shadow: 0 25px 45px rgba(0,0,0,0.1); }
  .floating { animation: floating 6s ease-in-out infinite; }
  @keyframes floating { 0%,100%{transform:translateY(0)} 33%{transform:translateY(-10px)} 66%{transform:translateY(5px)} }
  .custom-input, .form-input, .form-select { transition: all .25s ease; border: 2px solid #e5e7eb; background: rgba(255,255,255,0.9); padding: .75rem 1rem; border-radius: .5rem; width:100%; }
  .custom-input:focus { border-color: var(--primary-dark); box-shadow: 0 0 0 3px rgba(44,57,48,0.08); background:white; outline:none; }
  .btn-custom { background: linear-gradient(45deg,var(--primary-dark),var(--primary-medium)); color:white; border:none; padding:.75rem 1.25rem; border-radius: .75rem; font-weight:700; }
  .btn-custom:hover { transform: translateY(-2px); box-shadow:0 10px 25px rgba(44,57,48,0.18); }
  .hero-text-white{ color:#1a1a1a !important; text-shadow: 2px 2px 4px rgba(255,255,255,0.8); }
  .progress { height:8px; background:#eef2ff; border-radius:999px; }
  .progress > .bar { height:100%; background:linear-gradient(90deg,#34d399,#60a5fa); border-radius:999px; transition: width .3s ease; }
</style>
{% endblock %}

{% block content %}
<div class="min-h-screen gradient-bg relative overflow-hidden">
  <div class="absolute inset-0 opacity-10">
    <div class="absolute top-20 left-10 w-32 h-32 bg-white rounded-full floating"></div>
    <div class="absolute top-40 right-20 w-20 h-20 bg-neutral-light rounded-full floating" style="animation-delay:2s"></div>
    <div class="absolute bottom-20 left-1/4 w-16 h-16 bg-accent-warm rounded-full floating" style="animation-delay:4s"></div>
  </div>

  <div class="flex items-center justify-center min-h-screen py-12 px-4 sm:px-6 lg:px-8 relative z-10">
    <div class="max-w-md w-full space-y-8">
      <div class="text-center">
        <div class="mx-auto h-16 w-16 bg-white rounded-full flex items-center justify-center mb-6 shadow-lg">
          <svg class="h-8 w-8" style="color: var(--primary-dark);" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"></path>
          </svg>
        </div>
        <h2 class="text-3xl font-extrabold hero-text-white mb-2">Create your account</h2>
        <p class="text-sm hero-text-white">Step 1 of 3 â€” account details</p>
      </div>

      <div class="glass-card rounded-2xl p-6">
        <div class="mb-4">
          <div class="flex items-center justify-between mb-2">
            <div class="text-sm font-medium text-gray-700">Progress</div>
            <div class="text-sm text-gray-500">Step 1 of 3</div>
          </div>
          <div class="progress"><div class="bar" style="width:33%"></div></div>
        </div>

        <form method="post" novalidate>
          {% csrf_token %}
          <input type="hidden" name="step" value="1">

          <div class="space-y-4">
            <div>
              <label class="block text-sm font-medium text-gray-700">Username</label>
              <input name="username" value="{{ form.username.value|default:'' }}" class="custom-input" placeholder="Choose a username">
              {% if form.username.errors %}{% for e in form.username.errors %}<p class="text-red-600 text-sm">{{ e }}</p>{% endfor %}{% endif %}
            </div>

            <div>
              <label class="block text-sm font-medium text-gray-700">Email</label>
              <input name="email" type="email" value="{{ form.email.value|default:'' }}" class="custom-input" placeholder="you@example.com">
              {% if form.email.errors %}{% for e in form.email.errors %}<p class="text-red-600 text-sm">{{ e }}</p>{% endfor %}{% endif %}
            </div>

            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
              <div>
                <label class="block text-sm font-medium text-gray-700">Password</label>
                <input name="password1" type="password" class="custom-input" placeholder="Enter a strong password">
                {% if form.password1.errors %}{% for e in form.password1.errors %}<p class="text-red-600 text-sm">{{ e }}</p>{% endfor %}{% endif %}
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700">Confirm</label>
                <input name="password2" type="password" class="custom-input" placeholder="Repeat password">
                {% if form.password2.errors %}{% for e in form.password2.errors %}<p class="text-red-600 text-sm">{{ e }}</p>{% endfor %}{% endif %}
              </div>
            </div>

            <div>
              <label class="block text-sm font-medium text-gray-700">Account Type</label>
              <select name="user_type" class="custom-input">
                {% for value,label in form.user_type.field.choices %}
                  <option value="{{ value }}" {% if form.user_type.value == value %}selected{% endif %}>{{ label }}</option>
                {% endfor %}
              </select>
              {% if form.user_type.errors %}{% for e in form.user_type.errors %}<p class="text-red-600 text-sm">{{ e }}</p>{% endfor %}{% endif %}
            </div>
          </div>

          <div class="mt-6 flex items-center justify-between">
            <div></div>
            <button type="submit" class="btn-custom">Next</button>
          </div>
        </form>
      </div>

      <div class="mt-4 text-center text-sm text-gray-200">
        Already have an account? <a href="{% url 'core:login' %}" class="underline font-medium">Sign in</a>
      </div>
    </div>
  </div>
</div>
{% endblock %}
